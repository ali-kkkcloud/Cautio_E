<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Employee Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 1200px;
            min-height: 600px;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            color: #333;
        }

        .header h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .auth-section, .main-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .auth-section.active, .main-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            margin: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #00d2d3 0%, #54a0ff 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);
        }

        .btn-info {
            background: linear-gradient(135deg, #48dbfb 0%, #0abde3 100%);
        }

        .user-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #dee2e6;
        }

        .section h3 {
            color: #667eea;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section h3::before {
            content: '‚óè';
            color: #764ba2;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .employee-list {
            display: grid;
            gap: 1rem;
            margin-top: 1rem;
        }

        .employee-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 1.5rem;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .employee-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #667eea, #764ba2);
        }

        .employee-item:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .break-status {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .on-break {
            background: linear-gradient(135deg, #ffe0e0 0%, #ffcccb 100%);
            color: #d63031;
        }

        .working {
            background: linear-gradient(135deg, #e0ffe0 0%, #ccffcc 100%);
            color: #00b894;
        }

        .logged-out {
            background: linear-gradient(135deg, #e0e0e0 0%, #d3d3d3 100%);
            color: #636e72;
        }

        .actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn-small {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .alert-success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            color: #155724;
            border-color: #c3e6cb;
        }

        .alert-error {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            color: #721c24;
            border-color: #f5c6cb;
        }

        .alert-warning {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            color: #856404;
            border-color: #ffeaa7;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 0.25rem;
            margin-bottom: 1rem;
        }

        .tab {
            flex: 1;
            padding: 0.8rem 1rem;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .grid-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .search-box {
            position: relative;
            margin-bottom: 1rem;
        }

        .search-box input {
            padding-left: 2.5rem;
        }

        .search-box::before {
            content: 'üîç';
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
        }

        .floating-stats {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 1000;
            min-width: 200px;
        }

        .connection-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }

        .connected { background: #00b894; }
        .disconnected { background: #d63031; }
        .testing { background: #fdcb6e; }

        .employee-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 1px solid #e9ecef;
        }

        .employee-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .time-tracker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .time-item {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .time-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.25rem;
        }

        .time-label {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .notification.success { background: #00b894; }
        .notification.error { background: #d63031; }
        .notification.warning { background: #fdcb6e; color: #333; }

        @media (max-width: 768px) {
            .container {
                margin: 1rem;
                padding: 1rem;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .employee-item {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .grid-form {
                grid-template-columns: 1fr;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .floating-stats {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 1rem;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="floating-stats" id="floating-stats">
        <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
            <span class="connection-indicator" id="connection-dot"></span>
            <strong>System Status</strong>
        </div>
        <div style="font-size: 0.8rem;">
            <div>Connection: <span id="mini-status">Testing...</span></div>
            <div>Mode: <span id="mini-mode">Local</span></div>
            <div>Time: <span id="current-time">--:--</span></div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>üè¢ Advanced Employee Management System</h1>
            <p>Complete workforce management with real-time tracking</p>
        </div>

        <!-- Login Section -->
        <div class="auth-section active" id="auth-section">
            <div class="tabs">
                <div class="tab active" onclick="switchAuthTab('admin')">üë®‚Äçüíº Admin Login</div>
                <div class="tab" onclick="switchAuthTab('employee')">üë®‚Äçüíª Employee Login</div>
            </div>

            <!-- Admin Login -->
            <div id="admin-login-tab">
                <div class="section">
                    <h3>Administrator Access</h3>
                    <div id="auth-message"></div>
                    <div class="grid-form">
                        <div class="form-group">
                            <label for="admin-username">üë§ Username:</label>
                            <input type="text" id="admin-username" placeholder="Enter admin username">
                        </div>
                        <div class="form-group">
                            <label for="admin-password">üîê Password:</label>
                            <input type="password" id="admin-password" placeholder="Enter admin password">
                        </div>
                    </div>
                    <button class="btn" onclick="adminLogin()">
                        <span id="admin-login-text">üöÄ Login as Admin</span>
                    </button>
                </div>
            </div>

            <!-- Employee Login -->
            <div id="employee-login-tab" style="display: none;">
                <div class="section">
                    <h3>Employee Access</h3>
                    <div class="form-group">
                        <label for="employee-id">üÜî Employee ID:</label>
                        <input type="text" id="employee-id" placeholder="Enter your employee ID (e.g., EMP001)">
                    </div>
                    <button class="btn btn-success" onclick="employeeLogin()">
                        <span id="employee-login-text">‚úÖ Clock In</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="main-section" id="main-section">
            <div class="user-info">
                <div>
                    <strong id="user-name">Welcome</strong>
                    <span id="user-role"></span>
                    <div style="font-size: 0.8rem; color: #666;">
                        Last login: <span id="last-login">--:--</span>
                    </div>
                </div>
                <div>
                    <button class="btn btn-danger btn-small" onclick="logout()">üö™ Logout</button>
                </div>
            </div>

            <!-- Admin Dashboard -->
            <div id="admin-dashboard" style="display: none;">
                <!-- Real-time Statistics -->
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-employees">0</div>
                        <div class="stat-label">üë• Total Employees</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="total-progress" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="logged-in-count">0</div>
                        <div class="stat-label">üü¢ Active Now</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="active-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="on-break-count">0</div>
                        <div class="stat-label">‚òï On Break</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="break-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="productivity-score">0%</div>
                        <div class="stat-label">üìä Productivity</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="productivity-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>

                <!-- System Status -->
                <div class="section">
                    <h3>‚öôÔ∏è System Status</h3>
                    <div id="system-status">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                            <div>
                                <strong>üì° Connection:</strong><br>
                                <span id="connection-status">Local Mode</span>
                            </div>
                            <div>
                                <strong>üíæ Storage:</strong><br>
                                <span id="storage-status">Browser Storage</span>
                            </div>
                            <div>
                                <strong>üìä Data Source:</strong><br>
                                <span id="data-source">In-Memory</span>
                            </div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 1rem; border-radius: 8px; margin-top: 1rem; border: 1px solid #bbdefb;">
                            <h4>‚ÑπÔ∏è Local Mode Active</h4>
                            <p>System is running in local mode. All data is stored in browser memory and will be reset on page refresh. This demo showcases the UI and functionality without requiring external services.</p>
                        </div>
                    </div>
                </div>

                <!-- Employee Management -->
                <div class="section">
                    <h3>‚ûï Add New Employee</h3>
                    <div id="add-employee-message"></div>
                    <div class="grid-form">
                        <div class="form-group">
                            <label for="new-employee-id">üÜî Employee ID:</label>
                            <input type="text" id="new-employee-id" placeholder="EMP001" maxlength="10">
                        </div>
                        <div class="form-group">
                            <label for="new-employee-name">üë§ Full Name:</label>
                            <input type="text" id="new-employee-name" placeholder="John Doe">
                        </div>
                        <div class="form-group">
                            <label for="new-employee-department">üè¢ Department:</label>
                            <select id="new-employee-department">
                                <option value="">Select Department</option>
                                <option value="IT">IT & Technology</option>
                                <option value="HR">Human Resources</option>
                                <option value="Finance">Finance</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Sales">Sales</option>
                                <option value="Operations">Operations</option>
                                <option value="Support">Customer Support</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="new-employee-position">üíº Position:</label>
                            <input type="text" id="new-employee-position" placeholder="Software Developer">
                        </div>
                        <div class="form-group">
                            <label for="new-employee-email">üìß Email (Optional):</label>
                            <input type="email" id="new-employee-email" placeholder="john.doe@company.com">
                        </div>
                        <div class="form-group">
                            <label for="new-employee-phone">üì± Phone (Optional):</label>
                            <input type="tel" id="new-employee-phone" placeholder="+91 9876543210">
                        </div>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button class="btn" onclick="addEmployee()">
                            <span id="add-employee-text">‚ú® Add Employee</span>
                        </button>
                        <button class="btn btn-warning" onclick="clearAddForm()">üßπ Clear Form</button>
                        <button class="btn btn-info" onclick="loadSampleData()">üìã Load Sample Data</button>
                    </div>
                </div>

                <!-- Employee Directory -->
                <div class="section">
                    <h3>üîç Employee Directory</h3>
                    <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                        <div class="search-box" style="flex: 1; min-width: 250px;">
                            <input type="text" id="search-employees" placeholder="Search employees..." onkeyup="filterEmployees()">
                        </div>
                        <select id="filter-department" onchange="filterEmployees()" style="min-width: 150px;">
                            <option value="">All Departments</option>
                            <option value="IT">IT & Technology</option>
                            <option value="HR">Human Resources</option>
                            <option value="Finance">Finance</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Sales">Sales</option>
                            <option value="Operations">Operations</option>
                            <option value="Support">Customer Support</option>
                            <option value="Other">Other</option>
                        </select>
                        <select id="filter-status" onchange="filterEmployees()" style="min-width: 120px;">
                            <option value="">All Status</option>
                            <option value="working">Working</option>
                            <option value="on-break">On Break</option>
                            <option value="logged-out">Logged Out</option>
                        </select>
                    </div>
                    
                    <div class="employee-list" id="employee-list">
                        <!-- Employee items will be populated here -->
                    </div>
                    
                    <div id="no-employees" style="text-align: center; padding: 2rem; color: #666;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üë•</div>
                        <h3>No Employees Found</h3>
                        <p>Add some employees to get started!</p>
                    </div>
                </div>
            </div>

            <!-- Employee Dashboard -->
            <div id="employee-dashboard" style="display: none;">
                <!-- Personal Status Card -->
                <div class="section">
                    <h3>üìä Your Status</h3>
                    <div class="employee-card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <div>
                                <h3 id="employee-name-display">Employee Name</h3>
                                <p id="employee-details" style="color: #666; margin: 0;">Department - Position</p>
                            </div>
                            <div style="text-align: right;">
                                <div>Status: <span id="current-status" class="break-status working">Working</span></div>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 0.25rem;">
                                    Since: <span id="status-since">--:--</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-small" id="break-btn" onclick="toggleBreak()">‚òï Take Break</button>
                            <button class="btn btn-info btn-small" onclick="viewActivity()">üìà View Activity</button>
                            <button class="btn btn-warning btn-small" onclick="reportIssue()">‚ö†Ô∏è Report Issue</button>
                        </div>
                    </div>
                </div>

                <!-- Time Tracking -->
                <div class="section">
                    <h3>‚è∞ Today's Activity</h3>
                    <div class="time-tracker">
                        <div class="time-item">
                            <div class="time-value" id="login-time">--:--</div>
                            <div class="time-label">Login Time</div>
                        </div>
                        <div class="time-item">
                            <div class="time-value" id="work-hours">0.0</div>
                            <div class="time-label">Work Hours</div>
                        </div>
                        <div class="time-item">
                            <div class="time-value" id="break-duration">0</div>
                            <div class="time-label">Break (Min)</div>
                        </div>
                        <div class="time-item">
                            <div class="time-value" id="productivity-today">85%</div>
                            <div class="time-label">Productivity</div>
                        </div>
                    </div>
                    
                    <!-- Progress Bars -->
                    <div style="margin-top: 1rem;">
                        <div style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                            <span>Daily Target (8 hours)</span>
                            <span id="target-percentage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="daily-progress" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="section">
                    <h3>‚ö° Quick Actions</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <button class="btn btn-success" onclick="clockOut()">üèÉ‚Äç‚ôÇÔ∏è Clock Out</button>
                        <button class="btn btn-info" onclick="viewTeamStatus()">üë• Team Status</button>
                        <button class="btn btn-warning" onclick="requestLeave()">üèñÔ∏è Request Leave</button>
                        <button class="btn" onclick="viewSettings()">‚öôÔ∏è Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration - Local Mode
        const CONFIG = {
            MODE: 'LOCAL', // LOCAL mode for demo
            ADMIN_CREDENTIALS: {
                username: 'admin',
                password: 'admin123'
            }
        };

        // Application state
        let currentUser = null;
        let employees = [];
        let isLoggedIn = false;
        let refreshInterval = null;

        // Local Storage Simulation
        class LocalDataManager {
            constructor() {
                this.employees = [
                    {
                        id: 'EMP001',
                        name: 'John Doe',
                        department: 'IT',
                        position: 'Software Developer',
                        status: 'working',
                        loginTime: '09:00',
                        breakTime: 15,
                        lastActivity: new Date().toISOString(),
                        email: 'john.doe@company.com',
                        phone: '+91 9876543210'
                    },
                    {
                        id: 'EMP002',
                        name: 'Jane Smith',
                        department: 'HR',
                        position: 'HR Manager',
                        status: 'on-break',
                        loginTime: '09:15',
                        breakTime: 30,
                        lastActivity: new Date().toISOString(),
                        email: 'jane.smith@company.com',
                        phone: '+91 9876543211'
                    },
                    {
                        id: 'EMP003',
                        name: 'Mike Johnson',
                        department: 'Finance',
                        position: 'Accountant',
                        status: 'logged-out',
                        loginTime: null,
                        breakTime: 0,
                        lastActivity: new Date().toISOString(),
                        email: 'mike.j@company.com',
                        phone: '+91 9876543212'
                    }
                ];
            }

            async getEmployees() {
                return [...this.employees];
            }

            async addEmployee(employee) {
                const newEmployee = {
                    ...employee,
                    status: 'logged-out',
                    loginTime: null,
                    breakTime: 0,
                    lastActivity: new Date().toISOString()
                };
                this.employees.push(newEmployee);
                return { success: true, message: 'Employee added successfully' };
            }

            async updateEmployeeStatus(employeeId, status, loginTime = null, breakTime = 0) {
                const employee = this.employees.find(emp => emp.id === employeeId);
                if (employee) {
                    employee.status = status;
                    if (loginTime) employee.loginTime = loginTime;
                    employee.breakTime = breakTime;
                    employee.lastActivity = new Date().toISOString();
                    return { success: true, message: 'Status updated successfully' };
                }
                return { success: false, message: 'Employee not found' };
            }

            async removeEmployee(employeeId) {
                const index = this.employees.findIndex(emp => emp.id === employeeId);
                if (index > -1) {
                    this.employees.splice(index, 1);
                    return { success: true, message: 'Employee removed successfully' };
                }
                return { success: false, message: 'Employee not found' };
            }

            async testConnection() {
                return { success: true, message: 'Local mode connection successful', type: 'local' };
            }
        }

        // Initialize Local Data Manager
        const dataManager = new LocalDataManager();

        // Authentication functions
        function switchAuthTab(type) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'admin') {
                document.getElementById('admin-login-tab').style.display = 'block';
                document.getElementById('employee-login-tab').style.display = 'none';
            } else {
                document.getElementById('admin-login-tab').style.display = 'none';
                document.getElementById('employee-login-tab').style.display = 'block';
            }
        }

        async function adminLogin() {
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            const messageEl = document.getElementById('auth-message');
            const buttonText = document.getElementById('admin-login-text');
            
            buttonText.innerHTML = '<div class="loading"></div> Logging in...';

            if (username === CONFIG.ADMIN_CREDENTIALS.username && 
                password === CONFIG.ADMIN_CREDENTIALS.password) {
                currentUser = { type: 'admin', name: 'Administrator' };
                isLoggedIn = true;
                showMainSection();
                showNotification('Welcome, Administrator!', 'success');
                buttonText.textContent = 'üöÄ Login as Admin';
            } else {
                showMessage('auth-message', 'Invalid credentials! Please try again.', 'error');
                buttonText.textContent = 'üöÄ Login as Admin';
            }
        }

        async function employeeLogin() {
            const employeeId = document.getElementById('employee-id').value.trim();
            const buttonText = document.getElementById('employee-login-text');
            
            if (!employeeId) {
                showMessage('auth-message', 'Please enter your Employee ID!', 'error');
                return;
            }
            
            buttonText.innerHTML = '<div class="loading"></div> Logging in...';
            
            try {
                employees = await dataManager.getEmployees();
                const employee = employees.find(emp => emp.id === employeeId);

                if (employee) {
                    currentUser = { type: 'employee', ...employee };
                    isLoggedIn = true;
                    
                    // Update employee status to logged in
                    const loginTime = new Date().toLocaleTimeString('en-US', {
                        hour12: false,
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    await dataManager.updateEmployeeStatus(employeeId, 'working', loginTime, 0);
                    
                    showMainSection();
                    showNotification(`Welcome back, ${employee.name}!`, 'success');
                } else {
                    showMessage('auth-message', 'Employee ID not found! Please check and try again.', 'error');
                }
            } catch (error) {
                console.error('Login error:', error);
                showMessage('auth-message', 'Connection error. Please try again later.', 'error');
            }
            
            buttonText.textContent = '‚úÖ Clock In';
        }

        async function logout() {
            if (currentUser && currentUser.type === 'employee') {
                try {
                    await dataManager.updateEmployeeStatus(currentUser.id, 'logged-out', null, currentUser.breakTime || 0);
                    showNotification('Logged out successfully!', 'success');
                } catch (error) {
                    console.error('Logout error:', error);
                }
            }
            
            currentUser = null;
            isLoggedIn = false;
            
            if (refreshInterval) {
                clearInterval(refreshInterval);
                refreshInterval = null;
            }
            
            document.getElementById('auth-section').classList.add('active');
            document.getElementById('main-section').classList.remove('active');
            
            // Clear input fields
            document.getElementById('admin-username').value = '';
            document.getElementById('admin-password').value = '';
            document.getElementById('employee-id').value = '';
            
            updateConnectionStatus('disconnected', 'Logged out');
        }

        function showMainSection() {
            document.getElementById('auth-section').classList.remove('active');
            document.getElementById('main-section').classList.add('active');
            
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-role').textContent = `(${currentUser.type})`;
            document.getElementById('last-login').textContent = new Date().toLocaleTimeString();

            if (currentUser.type === 'admin') {
                document.getElementById('admin-dashboard').style.display = 'block';
                document.getElementById('employee-dashboard').style.display = 'none';
                loadAdminDashboard();
                // Start auto-refresh for admin
                refreshInterval = setInterval(loadAdminDashboard, 30000);
            } else {
                document.getElementById('admin-dashboard').style.display = 'none';
                document.getElementById('employee-dashboard').style.display = 'block';
                loadEmployeeDashboard();
                // Start auto-refresh for employee
                refreshInterval = setInterval(updateEmployeeData, 60000);
            }
        }

        // Admin Dashboard Functions
        async function loadAdminDashboard() {
            try {
                console.log('Loading admin dashboard...');
                employees = await dataManager.getEmployees();
                console.log('Loaded employees for dashboard:', employees);
                updateStats();
                renderEmployeeList();
                updateConnectionStatus('connected', 'Local Mode');
            } catch (error) {
                console.error('Error loading admin dashboard:', error);
                updateConnectionStatus('disconnected', 'Error');
                employees = [];
                updateStats();
                renderEmployeeList();
            }
        }

        function updateStats() {
            const totalEmployees = employees.length;
            const loggedInCount = employees.filter(emp => emp.status !== 'logged-out').length;
            const onBreakCount = employees.filter(emp => emp.status === 'on-break').length;
            const workingCount = employees.filter(emp => emp.status === 'working').length;
            
            // Calculate productivity score
            const productivityScore = totalEmployees > 0 ? Math.round((workingCount / totalEmployees) * 100) : 0;

            document.getElementById('total-employees').textContent = totalEmployees;
            document.getElementById('logged-in-count').textContent = loggedInCount;
            document.getElementById('on-break-count').textContent = onBreakCount;
            document.getElementById('productivity-score').textContent = productivityScore + '%';

            // Update progress bars
            const activePercent = totalEmployees > 0 ? (loggedInCount / totalEmployees) * 100 : 0;
            const breakPercent = totalEmployees > 0 ? (onBreakCount / totalEmployees) * 100 : 0;
            
            document.getElementById('active-progress').style.width = activePercent + '%';
            document.getElementById('break-progress').style.width = breakPercent + '%';
            document.getElementById('productivity-progress').style.width = productivityScore + '%';
        }

        function renderEmployeeList() {
            const listEl = document.getElementById('employee-list');
            const noEmployeesEl = document.getElementById('no-employees');
            
            if (employees.length === 0) {
                listEl.style.display = 'none';
                noEmployeesEl.style.display = 'block';
                return;
            }
            
            listEl.style.display = 'block';
            noEmployeesEl.style.display = 'none';
            listEl.innerHTML = '';

            employees.forEach(employee => {
                const employeeEl = document.createElement('div');
                employeeEl.className = 'employee-item';
                employeeEl.dataset.employeeId = employee.id;
                employeeEl.dataset.department = employee.department;
                employeeEl.dataset.status = employee.status;
                
                const statusClass = employee.status === 'working' ? 'working' : 
                                  employee.status === 'on-break' ? 'on-break' : 'logged-out';
                
                const lastActivity = employee.lastActivity ? 
                    new Date(employee.lastActivity).toLocaleString() : 'Never';
                
                employeeEl.innerHTML = `
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <strong style="font-size: 1.1rem;">${employee.name}</strong>
                            <span style="background: #e9ecef; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">${employee.id}</span>
                        </div>
                        <div style="color: #666; font-size: 0.9rem;">
                            üè¢ ${employee.department} ‚Ä¢ üíº ${employee.position}
                        </div>
                        <div style="color: #888; font-size: 0.8rem; margin-top: 0.25rem;">
                            üïê Login: ${employee.loginTime || 'Not logged in'} ‚Ä¢ 
                            ‚òï Break: ${employee.breakTime || 0} min ‚Ä¢ 
                            üìÖ Last seen: ${lastActivity}
                        </div>
                        ${employee.email ? `<div style="color: #888; font-size: 0.8rem;">üìß ${employee.email}</div>` : ''}
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="break-status ${statusClass}">${employee.status.replace('-', ' ')}</span>
                    </div>
                    <div class="actions">
                        <button class="btn btn-info btn-small" onclick="viewEmployeeDetails('${employee.id}')">üëÅÔ∏è View</button>
                        <button class="btn btn-warning btn-small" onclick="editEmployee('${employee.id}')">‚úèÔ∏è Edit</button>
                        <button class="btn btn-danger btn-small" onclick="removeEmployee('${employee.id}')">üóëÔ∏è Remove</button>
                    </div>
                `;
                
                listEl.appendChild(employeeEl);
            });
        }

        function filterEmployees() {
            const searchTerm = document.getElementById('search-employees').value.toLowerCase();
            const departmentFilter = document.getElementById('filter-department').value;
            const statusFilter = document.getElementById('filter-status').value;
            
            const employeeItems = document.querySelectorAll('.employee-item');
            
            employeeItems.forEach(item => {
                const name = item.querySelector('strong').textContent.toLowerCase();
                const department = item.dataset.department;
                const status = item.dataset.status;
                
                const matchesSearch = name.includes(searchTerm) || 
                                    item.dataset.employeeId.toLowerCase().includes(searchTerm);
                const matchesDepartment = !departmentFilter || department === departmentFilter;
                const matchesStatus = !statusFilter || status === statusFilter;
                
                if (matchesSearch && matchesDepartment && matchesStatus) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        async function addEmployee() {
            const id = document.getElementById('new-employee-id').value.trim();
            const name = document.getElementById('new-employee-name').value.trim();
            const department = document.getElementById('new-employee-department').value;
            const position = document.getElementById('new-employee-position').value.trim();
            const email = document.getElementById('new-employee-email').value.trim();
            const phone = document.getElementById('new-employee-phone').value.trim();
            const buttonText = document.getElementById('add-employee-text');

            if (!id || !name || !department || !position) {
                showMessage('add-employee-message', 'Please fill all required fields!', 'error');
                return;
            }

            // Validate Employee ID format
            if (!/^[A-Z]{2,5}\d{3,6}$/.test(id)) {
                showMessage('add-employee-message', 'Employee ID format: 2-5 letters + 3-6 numbers (e.g., EMP001)', 'error');
                return;
            }

            buttonText.innerHTML = '<div class="loading"></div> Adding...';

            try {
                // Check if employee already exists
                const currentEmployees = await dataManager.getEmployees();
                
                if (currentEmployees.find(emp => emp.id === id)) {
                    showMessage('add-employee-message', 'Employee ID already exists! Please use a different ID.', 'error');
                    buttonText.textContent = '‚ú® Add Employee';
                    return;
                }

                const newEmployee = { id, name, department, position, email, phone };
                
                const result = await dataManager.addEmployee(newEmployee);
                
                // Clear form
                clearAddForm();

                showMessage('add-employee-message', 'Employee added successfully! üéâ', 'success');
                showNotification(`${name} has been added to the system!`, 'success');
                
                // Refresh the employee list
                setTimeout(async () => {
                    await loadAdminDashboard();
                }, 1000);
                
            } catch (error) {
                console.error('Error adding employee:', error);
                showMessage('add-employee-message', 'Error adding employee: ' + error.message, 'error');
            }
            
            buttonText.textContent = '‚ú® Add Employee';
        }

        function clearAddForm() {
            document.getElementById('new-employee-id').value = '';
            document.getElementById('new-employee-name').value = '';
            document.getElementById('new-employee-department').value = '';
            document.getElementById('new-employee-position').value = '';
            document.getElementById('new-employee-email').value = '';
            document.getElementById('new-employee-phone').value = '';
        }

        async function removeEmployee(employeeId) {
            const employee = employees.find(emp => emp.id === employeeId);
            if (!employee) return;

            if (confirm(`Are you sure you want to remove ${employee.name}? This action cannot be undone.`)) {
                try {
                    await dataManager.removeEmployee(employeeId);
                    await loadAdminDashboard();
                    showMessage('add-employee-message', `${employee.name} has been removed successfully.`, 'success');
                    showNotification(`${employee.name} removed from system`, 'warning');
                } catch (error) {
                    console.error('Error removing employee:', error);
                    showMessage('add-employee-message', 'Error removing employee. Please try again.', 'error');
                }
            }
        }

        function loadSampleData() {
            showNotification('Sample data already loaded!', 'success');
        }

        // Employee Dashboard Functions
        async function loadEmployeeDashboard() {
            try {
                employees = await dataManager.getEmployees();
                const employee = employees.find(emp => emp.id === currentUser.id);
                if (employee) {
                    Object.assign(currentUser, employee);
                    updateEmployeeStatus(employee);
                    updateEmployeeDisplay(employee);
                }
                updateConnectionStatus('connected', 'Local Mode');
            } catch (error) {
                console.error('Error loading employee dashboard:', error);
                updateConnectionStatus('disconnected', 'Error');
            }
        }

        function updateEmployeeDisplay(employee) {
            document.getElementById('employee-name-display').textContent = employee.name;
            document.getElementById('employee-details').textContent = `${employee.department} - ${employee.position}`;
        }

        function updateEmployeeStatus(employee) {
            const statusEl = document.getElementById('current-status');
            const breakBtn = document.getElementById('break-btn');
            const statusSince = document.getElementById('status-since');
            
            if (employee.status === 'working') {
                statusEl.textContent = 'Working';
                statusEl.className = 'break-status working';
                breakBtn.textContent = '‚òï Take Break';
                statusSince.textContent = employee.loginTime || '--:--';
            } else if (employee.status === 'on-break') {
                statusEl.textContent = 'On Break';
                statusEl.className = 'break-status on-break';
                breakBtn.textContent = 'üîô End Break';
                statusSince.textContent = 'Break started';
            }

            // Update activity stats
            document.getElementById('login-time').textContent = employee.loginTime || '--:--';
            document.getElementById('break-duration').textContent = `${employee.breakTime || 0}`;
            
            // Calculate work hours
            if (employee.loginTime) {
                const loginTime = new Date();
                const [hours, minutes] = employee.loginTime.split(':');
                loginTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);
                const workHours = ((new Date() - loginTime) / (1000 * 60 * 60) - ((employee.breakTime || 0) / 60));
                const displayHours = Math.max(0, workHours).toFixed(1);
                document.getElementById('work-hours').textContent = displayHours;
                
                // Update progress bar
                const targetHours = 8;
                const percentage = Math.min(100, (workHours / targetHours) * 100);
                document.getElementById('daily-progress').style.width = percentage + '%';
                document.getElementById('target-percentage').textContent = Math.round(percentage) + '%';
                
                // Calculate productivity
                const productivity = Math.max(0, Math.min(100, 100 - ((employee.breakTime || 0) / 480) * 100));
                document.getElementById('productivity-today').textContent = Math.round(productivity) + '%';
            }
        }

        async function toggleBreak() {
            try {
                const employee = employees.find(emp => emp.id === currentUser.id);
                if (employee) {
                    let newStatus;
                    let newBreakTime = employee.breakTime || 0;
                    
                    if (employee.status === 'working') {
                        newStatus = 'on-break';
                        employee.breakStartTime = new Date();
                        showNotification('Break started! Enjoy your break ‚òï', 'warning');
                    } else if (employee.status === 'on-break') {
                        newStatus = 'working';
                        if (employee.breakStartTime) {
                            const breakDuration = (new Date() - employee.breakStartTime) / (1000 * 60);
                            newBreakTime += Math.round(breakDuration);
                        }
                        showNotification('Welcome back! Break ended üîô', 'success');
                    }
                    
                    await dataManager.updateEmployeeStatus(currentUser.id, newStatus, employee.loginTime, newBreakTime);
                    
                    // Update local data
                    employee.status = newStatus;
                    employee.breakTime = newBreakTime;
                    currentUser.status = newStatus;
                    currentUser.breakTime = newBreakTime;
                    
                    updateEmployeeStatus(employee);
                }
            } catch (error) {
                console.error('Error toggling break status:', error);
                showNotification('Error updating status. Please try again.', 'error');
            }
        }

        // Utility Functions
        function updateConnectionStatus(status, message) {
            const dot = document.getElementById('connection-dot');
            const miniStatus = document.getElementById('mini-status');
            const miniMode = document.getElementById('mini-mode');
            
            dot.className = `connection-indicator ${status}`;
            miniStatus.textContent = message;
            miniMode.textContent = 'Local Mode';
        }

        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString('en-US', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        async function updateEmployeeData() {
            if (currentUser && currentUser.type === 'employee') {
                try {
                    employees = await dataManager.getEmployees();
                    const employee = employees.find(emp => emp.id === currentUser.id);
                    if (employee) {
                        Object.assign(currentUser, employee);
                        updateEmployeeStatus(employee);
                    }
                } catch (error) {
                    console.error('Error updating employee data:', error);
                }
            }
        }

        // Show message function
        function showMessage(elementId, message, type) {
            const messageEl = document.getElementById(elementId);
            messageEl.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => {
                messageEl.innerHTML = '';
            }, 5000);
        }

        // Show notification function
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        // Employee functions
        function viewEmployeeDetails(employeeId) {
            const employee = employees.find(emp => emp.id === employeeId);
            if (!employee) return;
            
            alert(`Employee Details:\n\nID: ${employee.id}\nName: ${employee.name}\nDepartment: ${employee.department}\nPosition: ${employee.position}\nStatus: ${employee.status}\nLogin Time: ${employee.loginTime || 'Not logged in'}\nBreak Time: ${employee.breakTime || 0} minutes\nLast Activity: ${new Date(employee.lastActivity).toLocaleString()}`);
        }

        function editEmployee(employeeId) {
            showNotification('Edit employee feature coming soon!', 'warning');
        }

        function clockOut() {
            if (confirm('Are you sure you want to clock out for the day?')) {
                logout();
            }
        }

        function viewTeamStatus() {
            showNotification('Team status feature coming soon!', 'warning');
        }

        function requestLeave() {
            showNotification('Leave request feature coming soon!', 'warning');
        }

        function viewSettings() {
            showNotification('Settings feature coming soon!', 'warning');
        }

        function viewActivity() {
            showNotification('Activity details feature coming soon!', 'warning');
        }

        function reportIssue() {
            showNotification('Issue reporting feature coming soon!', 'warning');
        }

        // Initialize the application
        async function init() {
            console.log('Initializing application in local mode...');
            
            // Update connection status
            updateConnectionStatus('connected', 'Local Mode');
            
            // Update status elements
            document.getElementById('connection-status').textContent = '‚úì Local mode active';
            document.getElementById('connection-status').style.color = 'green';
            document.getElementById('storage-status').textContent = '‚úì Browser memory';
            document.getElementById('storage-status').style.color = 'green';
            document.getElementById('data-source').textContent = '‚úì In-memory simulation';
            document.getElementById('data-source').style.color = 'green';
            
            // Load initial employee data
            try {
                employees = await dataManager.getEmployees();
                console.log('Initial employee data loaded:', employees);
            } catch (error) {
                console.error('Error loading initial data:', error);
                employees = [];
            }
            
            // Start time updater
            setInterval(updateCurrentTime, 1000);
            updateCurrentTime();
        }

        // Initialize the application when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Handle keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey || event.metaKey) {
                switch(event.key) {
                    case 'r':
                        event.preventDefault();
                        if (isLoggedIn) {
                            showNotification('Data refreshed!', 'success');
                            if (currentUser.type === 'admin') {
                                loadAdminDashboard();
                            } else {
                                loadEmployeeDashboard();
                            }
                        }
                        break;
                }
            }
        });
    </script>
</body>
</html>
